(function(){var t={},e=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this);var e=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){var e,i;t._execShellCmd=function(t,e,n){if(i[t]){console.log("CALLING ",t);var r=_promise(),o=this;return i[t].apply(this,[e,n,r]),r.then(function(e){console.log(t,"resolved with, sending to output  ",e),o.output(e)}).fail(function(t){o.output(t,"error")}),r}},t._getCmdFromStr=function(t){if(t){t=t.trim();var n=t.split(" ");return e[n[0]]}},t._getCmdStr=function(t){if(t){t=t.trim();var e=t.split(" ");return e[0]}},t._getParamsFromStr=function(t){if(t){t=t.trim();var e=t.split(" ");return e.shift(),e.join(" ")}},t._initShellCmds=function(){i||(i={},i.mkarr=function(t,e,n){var i=this.getCurrent();t?i.createArrayField(t,[]).then(function(){n.resolve("Created "+t)}).fail(function(t){n.resolve(t)}):n.resolve("could not create")},i.mkdir=function(t,e,n){var i=this.getCurrent();t?i.createObjectField(t,{}).then(function(){n.resolve("Created "+t)}).fail(function(t){n.resolve(t)}):n.resolve("could not create")},i["var"]=function(t,e,n){e&&t&&(console.log("Setting ",t,"to value ",e),this.setVar(t,e),n.resolve())},i.find=function(t,e,n){var i=t.trim(),r=[],o=this,s=function(t,e,n){console.log("Finding items for ",t),o.isObject(t)&&t.keys&&t.keys(function(t,i){console.log(t),t.match(e)&&r.push([t,i,n]),o.isObject(i)&&s(_data(i),e,n+(n?"/":"")+t)})};s(this.getCurrent(),i,""),r.forEach(function(t){o.output(t[2]+"/"+t[0])}),n.resolve(!0)},i.exec=function(t,e,i){var r;if(t=t.trim(),r=this._pathToObject(t),console.log("exec param ",t),r){var o=r[0],s=r[1],a=this;if(this.isFunction(o[s])){var u=o[s]();console.log("The param = "+s);var c=u.split("\n");console.log("Commands ",u),c.forEach(function(t){var e=n(a);console.log("Should run  ",t),t&&e.exec(t,a.getCurrent(),"")})}}i.resolve("")},i.delay=function(t,e,n){return t?void setTimeout(function(){n.resolve("Waited "+t+" ms")},t):void n.resolve("Set the delay")},i.show=function(t,e,n){return t?(console.log("Asking ",t),void n.resolve(this.getVar(t))):void n.resolve(JSON.stringify(this._vars),null,2)},i.cp=function(t,e,n){console.log(t);var i=t.split(" ");if(i.length<2)return void n.resolve("Can not copy");var r=this._pathToObject(i[0]),o=this._pathToObject(i[1]);if(console.log(r),r){var s,a,u=r[0],c=r[1];o?(s=o[0],a=o[1]):(s=u,a=i[1]),u[c]&&s.set(a,u[c]()).then(function(){n.resolve("Copied "+i[0]+" to "+i[1])}).fail(function(){n.resolve("Could not copy "+i[0]+" to "+i[1])})}else n.resolve("Could not copy "+i[0]+" to "+i[1])},i.rm=function(t,e,n){var i=this.getCurrent();if(i&&i.isArray()){var r=i.at(t);r?(r.remove(),n.resolve("* Removed Object *")):n.resolve("* invalid index *")}else i[t]?i.unset(t):n.resolve("No such file or property")},i.push=function(t,e,n){var i=this.getCurrent();if(i&&i.isArray()){var r=JSON.parse(t||e);r?(console.log("About to push data"),i.push(r).then(function(){n.resolve("Created array")}).fail(function(t){n.resolve("Created array Failed  "+t)})):n.resolve("Invalid JSON")}else n.resolve("Not an array")},i.filter=function(t,e,n){console.log("Filter with ",t,e);var i;if(t&&e){if(i=this._pathToObject(e)){var r=i[0],o=i[1];if(this.isFunction(r[o])){var s=r[o]();if(s.match(t))return console.log("Filter got ",e),void n.resolve(e)}}}else console.log("Filter did not have params");console.log("Exiting the filter function"),n.resolve("novalue")},i.collect=function(t,e,n){var i=this.getCurrent();return i&&i.serialize?void n.resolve(JSON.stringify(i.serialize(),null,2)):void n.resolve("")},i.cat=function(t,e,n){var i;if(console.log("Cat Current dir ",this.getCurrent()),console.log(e,t),t=t||"",e=e||"",t&&(t=t.trim()),e&&(e=e.trim()),i=this._pathToObject(e?e:t),console.log("Cat with ",i),i){var r=i[0],o=i[1];if(this.isFunction(r[o]))return console.log("cat resolved with ",r[o]()),void n.resolve(r[o]())}n.resolve("")})},t._outputRaw=function(t,e,n){if(this._parentShell)return void this._parentShell._outputRaw(t,e,n);var i=this._shellCmdOutput.div(e);"string"==typeof t?i.pre().text(t):i.add(t),this._shellCmdOutput._dom.scrollTop=this._shellCmdOutput._dom.scrollHeight,n&&n.onClick&&i.on("click",function(){n.onClick()})},t._pathToObject=function(t,e){e||(e=this.getCurrent()),console.log("path to obj ",t),t=t.trim(),"/"==t[0]&&(console.log("--- taking root"),e=this.getRoot());var n,i,r=t.split("/"),o=e;for(console.log("--- _pathToObject",r);r.length;){var s=r.shift();if(s&&(s=s.trim()))if(o[s]&&!this.isFunction(o[s]))o=o[s],n=o,i=s;else{if(!o[s])return null;n=o,i=s}}return[o,i]},t.addPipedCmd=function(t,n){e[t]=n},t.addToHistory=function(t){this._historyLog&&(this.isObject(t)||(t={cmd:t,time:(new Date).getTime()}),this._historyLog.push(t))},t.clearScreen=function(){this._shellCmdOutput.clear()},t.clearVar=function(t){return this._parentShell?void this._parentShell.clearVar(t,value):(this._vars[t]=[],void console.log(this._vars))},t.exec=function(t,e,n){var i=t.split("|"),o=!1,s=this,a=streamProcessor();a.set("currentDir",this.getCurrent()),a.set("shell",this);var u,c=r(a);return i.forEach(function(t){var e=s._getCmdStr(t);if(s._cmds[e]){o=!0;var n=s._cmds[e],i=s._getParamsFromStr(t);"undefined"==typeof u&&(u=i);var r=streamProcessor(null,!0);console.log("Setting closure to ",r),r.set("params",i),c.addObserver(n,r)}}),o?(this.addToHistory(t),c.forEach(function(t){console.log("Got ",t),s.output(t+"")}),void c.pushValue(u)):this.exec2(t,e,n)},t.exec2=function(t,e,i){try{var r=_promise(),o=this;e&&(this._currentDir=e),t.trim&&(t=t.trim());var s=t.split("|"),a=!1;if(s.length>1){var u=s[0];a=!0,console.log("Left pipe ",u),t=u.trim(),this._pipe=[],this._pipedShell=n(this),s.shift(),this._rightPipe=s.join(" | "),this._pipeToCmd=s[1],this._pipeCmd=this._getCmdFromStr(this._pipeToCmd),this._pipeCmdParams=this._getParamsFromStr(this._pipeToCmd),console.log("Should pipe to ",this._pipeToCmd),console.log("Command now ",t)}if(i){var c=this._getCmdStr(t),l=this._getParamsFromStr(t);console.log("Cmd ",c),console.log("params",l),console.log("Getting piped data ",i),"grep"==c&&i.match(l)&&o.output(i);var f;return(f=this._execShellCmd(c,l,i))?(f.then(function(){console.log("Should delete the piping"),delete o._pipe,r.resolve()}),r):(delete this._pipe,r)}var h=(this.parsePathName(),this._getCmdStr(t)),_=this._getParamsFromStr(t);console.log("** test ",h,_);var f;if(f=this._execShellCmd(h,_))return void f.then(function(){console.log("Should delete the piping"),console.log(o),delete o._pipe});if(console.log("**** NON STANDARD COMMAND *****"),"find"==t.substring(0,4)){var d=t.substring(5),p=[],v=function(t,e,n){console.log("Finding items for ",t),o.isObject(t)&&t.keys&&t.keys(function(t,i){console.log(t),t.match(e)&&p.push([t,i,n]),o.isObject(i)&&v(_data(i),e,n+(n?"/":"")+t)})};v(this._currentDir,d,""),o.output("Found "+p.length+" matches "),p.forEach(function(t){o.output(t[2]+"/"+t[0])})}if("info"==t.substring(0,4)){var d=t.substring(5);console.log(this._pathToObject(d))}if("pwd"==t){for(var m=function(t){var e="",n=t.parent();return n?(n.keys(function(n,i){console.log(" key "),console.log(n),console.log(i),console.log(t),_data(i)==t&&(e=n)}),console.log(e),e):""},g=this._currentDir,y="";g;)y=m(g)+"/"+y,g=g.parent();o.output(y)}if("ls"==t&&(o.output("..","dir",{onClick:function(){o.exec("cd .."),o.exec("ls")}}),this._currentDir.keys(function(t,e){var n=o._currentDir;if(o.isObject(e))o.output(t,"dir",{onClick:function(){o.exec("cd "+t,n),o.exec("dir")}});else{if(t.match(".svgpath")){var i=_e("table"),r=_e("svg").width(20).height(20);return r.g().path({d:e,fill:"white"}),i.addRow(r,t),void o.output(i,"file",{onClick:function(){o.output("Don't know how to open file SVG","warning")}})}t.match(".svg")?(console.log("SVG edit"),o.output(t,"file",{onClick:function(){o.output("Don't know how to open file SVG","warning")}})):o.output(t,"file",{onClick:function(){o.exec("edit "+t,n)}})}})),"edit"==t.substring(0,4)){var b,d=t.substring(5);if(b=this._currentDir[d]){if(this.isFunction(b)){var w=_e();this.getOutputArea().pushView(w),this.startProcess("edit",w,this._currentDir,d)}}else{var o=this;this._currentDir.set(d,"").then(function(){var t=_e();o.getOutputArea().pushView(t),o.startProcess("edit",t,this._currentDir,d)})}}if("cd"==t.substring(0,2)){var I=t.substring(3),C=!1;"/"==I&&(this._currentDir=this._doc,C=!0);var O=I.split("/"),S=!1;if(O.length>1&&(S=!0,I=O.shift()),".."==I){var x=this._currentDir.parent();x&&(this._currentDir=x),C=!0}C||(this._currentDir.isArray()?this._currentDir.at(I)?this._currentDir=this._currentDir.at(I):this.output(I+" is a invalid value "):this._currentDir[I]&&(console.log(this._currentDir[I]),this.isFunction(this._currentDir[I])?this.output(I+" is a invalid value "):this._currentDir=this._currentDir[I])),S&&o.exec("cd "+O.join("/"))}delete o._pipe}catch(j){o.output(j.message,"warning")}},t.getCurrent=function(){return this._parentShell?this._parentShell.getCurrent():this._currentDir},t.getInitData=function(){return this._initData},t.getInputField=function(){if(this._shellCmdInput)return this._shellCmdInput;var t=_e("textarea"),e=this;return t.addClass("shellCmdInput"),t.on("value",function(){var n=t.val();if(console.log(n),n){var i=n.split("\n");if(i.length>1){var r=e.parsePathName();e.output(r+"> "+i[0],"cmdline"),e.exec(i[0]),t.val("")}}}),this._shellCmdInput=t,t},t.getMainWindow=function(){return this._mainWindow},t.getOutputArea=function(){if(this._shellCmdOutput)return this._shellCmdOutput;var t=_e("div");return t.addClass("shellCmdOutput"),this._shellCmdOutput=t,t},t.getRoot=function(){return this._parentShell?this._parentShell.getRoot():this._doc},t.getVar=function(t){return this._parentShell?this._parentShell.getVar(t):this._vars[t]},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._vars={},this._cmds={},e||(e={},this._initShellCmds()),this._doc=t,this._currentDir=this._doc,this._doc.then(function(){console.log("Shell is ready")})}),t.initializeShell=function(t,e){t||(t=this._initData);var n=this;t&&t.then(function(){if(n._initData=t,e){var i=e.getInitData();i&&i.bin&&i.bin.keys(function(t,e){e&&e.data&&e.data.body&&(n._cmds[t]=new Function("m",e.data.body))})}if(t.bin&&t.bin.keys(function(t,e){e&&e.data&&e.data.body&&(n._cmds[t]=new Function("m",e.data.body))}),t["var"]&&t["var"].history){var r=t["var"].history;r.log&&(n._historyLog=r.log)}})},t.isValidCommand=function(t){return t=this._getCmdStr(t),i[t]},t.lineToStream=function(t,e){var n=t.split("|"),i=!1,o=this,s=streamProcessor(e);s.set("currentDir",this.getCurrent()),s.set("shell",this);var a,u=r(s);return n.forEach(function(t){var e=o._getCmdStr(t);if(o._cmds[e]){i=!0;var n=o._cmds[e],r=o._getParamsFromStr(t);"undefined"==typeof a&&(a=r);var s=streamProcessor(null,!0);console.log("Setting closure to ",s),s.set("params",r),u.addObserver(n,s)}}),i?u:void 0},t.mainWindow=function(t){this._mainWindow=t},t.output=function(t,e,n){return this._pipe?void this._pipedShell.exec(this._rightPipe,this.getCurrent(),t):void this._outputRaw(t,e,n)},t.parsePathName=function(){for(var t=function(t){var e="",n=t.parent();return n?(n.keys(function(n,i){_data(i)==t&&(e=n)}),e):""},e=this._currentDir,n="";e;)n=t(e)+"/"+n,e=e.parent();return n},t.saveVar=function(t,e){return this._parentShell?void this._parentShell.saveVar(t,e):void(this._vars[t]=e)},t.scrollBottom=function(){this._shellCmdOutput._dom.scrollTop=this._shellCmdOutput._dom.scrollHeight},t.setVar=function(t,e){return this._parentShell?void this._parentShell.setVar(t,e):(this._vars[t]||(this._vars[t]=[]),this._vars[t].push(e),void console.log(this._vars))},t.startProcess=function(t,e,n,i){if("edit"==t){var r=(templateCompiler(),this);e.div().button().text("EXIT").on("click",function(){e.parent().popView(),setTimeout(function(){r.scrollBottom()},500)}),n.then(function(){return n[i]?void e.div().aceEditor({varName:i,width:400,height:400},n):void n.set(i,"").then(function(){e.div().aceEditor({varName:i,width:400,height:400},n)})})}}}(this)},n=function(t,e,i,r,o,s,a,u){var c,l=this;if(!(l instanceof n))return new n(t,e,i,r,o,s,a,u);var f=[t,e,i,r,o,s,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=n._classInfo.name)return new c(t,e,i,r,o,s,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};n._classInfo={name:"itemShell"},n.prototype=new e,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.itemShell=n,this.itemShell=n):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.itemShell=n:this.itemShell=n}.call(new Function("return this")());var i=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this);var e=function(){!function(t){t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return t===Object(t)}}(this);var e=function(){!function(t){var e,n,i,r,o,s,a,u;t._easeFns=function(){a={bounceOut:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeIn:function(t){return t*t},easeOut:function(t){return-1*t*(t-2)},easeInOut:function(t){return.5>t?t*t:-1*t*(t-2)},easeInCirc:function(t){return-1*(Math.sqrt(1-t*t)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(1-t)*(1-t)*(1-t)+1},pow:function(t){return Math.pow(t,parseFloat(1.5-t))},linear:function(t){return t}}},t.add=function(t,e,i){if(e||i){var r;"[object Array]"===Object.prototype.toString.call(i)?r=i:(r=Array.prototype.slice.call(arguments,2),r||(r=[])),n.push([e,t,r])}else n.push(t)},t.addEasingFn=function(t,e){a[t]=e},t.after=function(t,e,n){n||(n="aft7491_"+s++),r[n]={step:Math.floor(1e3*t),fn:e,nextTime:0,remove:!0}},t.asap=function(t){this.add(t)},t.ease=function(t,e,n,i){var r=a[t];r||(r=a.pow);var o="e_"+s++;u[o]={easeFn:r,duration:e,cb:n,over:i}},t.every=function(t,e,n){n||(n="t7491_"+s++),r[n]={step:Math.floor(1e3*t),fn:e,nextTime:0}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!e){this._easeFns(),s=1,this.polyfill();var t,a;if("undefined"!=typeof window){var t=window.requestAnimationFrame,a=window.cancelRequestAnimationFrame;["","ms","moz","webkit","o"].forEach(function(e){t||(t=window[e+"RequestAnimationFrame"],a=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"])})}var c=new Function("try { return this == global; } catch(e) { return false; }")();c?t=function(t){return setImmediate(t)}:t||(t=function(t){return setTimeout(t,16)}),a||(a=function(t){clearTimeout(t)}),n=[],i={},r={},o=[],u={};var l=0,f=function(){var e=(new Date).getTime(),s=l-e;0==l&&(s=0);for(var a;a=n.shift();)"[object Array]"===Object.prototype.toString.call(a)?a[1].apply(a[0],a[2]):a();for(var c=0;c<o.length;c++){var h=o[c];h()}for(var _ in u)if(u.hasOwnProperty(_)){var d=u[_];d.start||(d.start=e);var p=e-d.start,v=p/d.duration;v>=1&&(v=1,delete u[_]),d.cb(d.easeFn(v)),1==v&&d.over&&d.over()}for(var _ in i)if(i.hasOwnProperty(_)){var d=i[_];d[0](d[1]),delete i[_]}for(var _ in r)if(r.hasOwnProperty(_)){var d=r[_];d.nextTime<e&&(d.remove?d.nextTime>0?(d.fn(),delete r[_]):d.nextTime=e+d.step:(d.fn(),d.nextTime=e+d.step)),d.until&&d.until<e&&delete r[_]}t(f),l=e};f(),e=!0}}),t.once=function(t,e,n){i[t]=[e,n]},t.onFrame=function(t){o.push(t)},t.polyfill=function(){},t.removeFrameFn=function(t){var e=o.indexOf(t);return e>=0?(t._onRemove&&t._onRemove(),o.splice(e,1),!0):!1}}(this)},i=function(t,e,n,r,o,s,a,u){var c,l=this;if(!(l instanceof i))return new i(t,e,n,r,o,s,a,u);var f=[t,e,n,r,o,s,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=i._classInfo.name)return new c(t,e,n,r,o,s,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};i._classInfo={name:"later"},i.prototype=new e,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.later=i,this.later=i):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.later=i:this.later=i}.call(new Function("return this")()),function(t){t.all=function(t){var e;e=this.isArray(t)?t:Array.prototype.slice.call(arguments,0);var i=e.length,r=0,o=[],s=new Array(i);return this.then(function(){var t=n();return 0==e.length&&t.resolve([]),e.forEach(function(e,n){e.then?(o.push(e),e.then(function(e){s[n]=e,r++,r==i&&t.resolve(s)},function(e){t.reject(e)})):t.reject("Not list of promises")}),t})},t.collect=function(t,e,i){var r;r=this.isArray(e)?e:[e];var o=r.length,s=!1,a=!1,u=0,c=[],l=i||{};return this.then(function(){var e=n();return r.forEach(function(n){n.then?(c.push(n),n.then(function(n){u++,s=t(n,l),(s&&!a||0==a&&o==u)&&(e.resolve(l),a=!0)},function(t){e.reject(t)})):e.reject("Not list of promises")}),e})},t.fail=function(t){return this.then(null,t)},t.fulfill=function(t){if(!(this._rejected||this._fulfilled&&t!=this._stateValue)){this._fulfilled=!0,this._stateValue=t;for(var e=this._childPromises.length;e--;){var n=this._childPromises.shift();if(n._onFulfill)try{var i=n._onFulfill(t);"undefined"!=typeof i?n.resolve(i):n.fulfill(t)}catch(r){n.reject(r)}else n.fulfill(t)}this._state=1,this.triggerStateChange()}},t.genPlugin=function(t,e){this.plugin(t,function(){var t=Array.prototype.slice.call(arguments,0);console.log("Plugin args",t);var i=n();return this.then(function(){var n=Array.prototype.slice.call(arguments,0),r=t.concat(n),o=e.apply(this,r);i.resolve(o)},function(t){i.reject(t)}),i})},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){if(this._state=0,this._stateValue=null,this._isAPromise=!0,this._childPromises=[],this.isFunction(t)&&(this._onFulfill=t),this.isFunction(e)&&(this._onReject=e),!e&&this.isFunction(t)){var n=this;i().asap(function(){t(function(t){n.resolve(t)},function(t){n.resolve(t)})})}}),t.isFulfilled=function(){return 1==this._state},t.isPending=function(){return 0==this._state},t.isRejected=function(){return 2==this._state},t.nodeStyle=function(t,e){this.plugin(t,function(){var t,n,i=Array.prototype.slice.call(arguments,0),r=0;i.length>=0&&(t=i[i.length-1],"[object Function]"==Object.prototype.toString.call(t)&&(n=t,r=i.length-1));var o=wishes().pending();return this.then(function(){var t=wishes().pending(),s=Array.prototype.slice.call(arguments,0);console.log("Orig args",i),console.log("Then args",s);var a;0==i.length&&(a=s),0==s.length&&(a=i),a||(a=s.concat(i)),r=a.length,n&&r--,a[r]=function(e){if(e)return console.log("Got error ",e),t.reject(e),void o.reject(e);if(n){var i=Array.prototype.slice.call(arguments),r=n.apply(this,i);o.resolve(r)}else{var i=Array.prototype.slice.call(arguments,1);o.resolve.apply(o,i)}},t.then(function(t){o.resolve(t)}),console.log("nodeStyle after concat",a);e.apply(this,a);return t},function(t){o.reject(t)}),o})},t.onStateChange=function(t){this._listeners||(this._listeners=[]),this._listeners.push(t)},t.plugin=function(e,n){return t[e]=n,this},t.props=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({name:n,promise:t[n]});var i=e.length,r=0,o=[],s={};return this.then(function(){var t=wishes().pending();return e.forEach(function(e){var n=e.promise,a=e.name;n.then?(o.push(n),n.then(function(e){s[a]=e,r++,r==i&&t.resolve(s)},function(e){t.reject(e)})):t.reject("Not list of promises")}),t})},t.reject=function(t){if(!(this._fulfilled||this._rejected&&t!=this._rejectReason)){this._state=2,this._rejected=!0,this._rejectReason=t;for(var e=this._childPromises.length;e--;){var n=this._childPromises.shift();if(n._onReject)try{n._onReject(t),n.reject(t)}catch(i){n.reject(i)}else n.reject(t)}this.triggerStateChange()}},t.rejectReason=function(t){return t?void(this._rejectReason=t):this._rejectReason},t.resolve=function(t){if(!(this._state>0)){if(t==this)return this._rejectReason="TypeError",void this.reject(this._rejectReason);if(this.isObject(t)&&t._isAPromise){if(this._state=t._state,this._stateValue=t._stateValue,this._rejectReason=t._rejectReason,0===this._state){var e=this;t.onStateChange(function(){1==t._state&&e.resolve(t.value()),2==t._state&&e.reject(t.rejectReason())})}return 1==this._state&&this.fulfill(this._stateValue),void(2==this._state&&this.reject(this._rejectReason))}if(this.isObject(t)&&t.then&&this.isFunction(t.then)){var n=!1;try{var e=this;t.then.call(t,function(t){n||(e.resolve(t),n=!0)},function(t){n||(e.reject(t),n=!0)})}catch(i){n||this.reject(i)}}else this._state=1,this._stateValue=t,this.fulfill(t)}},t.state=function(t){return"undefined"!=typeof t&&(this._state=t),this._state},t.then=function(t,e){e||(e=function(){});var r=new n(t,e),o=this;return 1==this._state&&i().asap(function(){o.fulfill(o.value())}),2==this._state&&ater().asap(function(){o.reject(o.rejectReason())}),this._childPromises.push(r),r},t.triggerStateChange=function(){var t=this;this._listeners&&(this._listeners.forEach(function(e){e(t)}),this._listeners.length=0)},t.value=function(t){return"undefined"!=typeof t?(this._stateValue=t,this):this._stateValue}}(this)},n=function(t,e,i,r,o,s,a,u){var c,l=this;if(!(l instanceof n))return new n(t,e,i,r,o,s,a,u);var f=[t,e,i,r,o,s,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=n._classInfo.name)return new c(t,e,i,r,o,s,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};n._classInfo={name:"_promise"},n.prototype=new e,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t._promise=n,this._promise=n):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports._promise=n:this._promise=n}.call(new Function("return this")());var i=function(){!function(t){var e,n,i,r,o,s,a,u;t._easeFns=function(){a={bounceOut:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeIn:function(t){return t*t},easeOut:function(t){return-1*t*(t-2)},easeInOut:function(t){return.5>t?t*t:-1*t*(t-2)},easeInCirc:function(t){return-1*(Math.sqrt(1-t*t)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(1-t)*(1-t)*(1-t)+1},pow:function(t){return Math.pow(t,parseFloat(1.5-t))},linear:function(t){return t}}},t.add=function(t,e,i){if(e||i){var r;"[object Array]"===Object.prototype.toString.call(i)?r=i:(r=Array.prototype.slice.call(arguments,2),r||(r=[])),n.push([e,t,r])}else n.push(t)},t.addEasingFn=function(t,e){a[t]=e},t.after=function(t,e,n){n||(n="aft7491_"+s++),r[n]={step:Math.floor(1e3*t),fn:e,nextTime:0,remove:!0}},t.asap=function(t){this.add(t)},t.ease=function(t,e,n,i){var r=a[t];r||(r=a.pow);var o="e_"+s++;u[o]={easeFn:r,duration:e,cb:n,over:i}},t.every=function(t,e,n){n||(n="t7491_"+s++),r[n]={step:Math.floor(1e3*t),fn:e,nextTime:0}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!e){this._easeFns(),s=1,this.polyfill();var t,a;if("undefined"!=typeof window){var t=window.requestAnimationFrame,a=window.cancelRequestAnimationFrame;["","ms","moz","webkit","o"].forEach(function(e){t||(t=window[e+"RequestAnimationFrame"],a=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"])})}var c=new Function("try { return this == global; } catch(e) { return false; }")();c?t=function(t){return setImmediate(t)}:t||(t=function(t){return setTimeout(t,16)}),a||(a=function(t){clearTimeout(t)}),n=[],i={},r={},o=[],u={};var l=0,f=function(){var e=(new Date).getTime(),s=l-e;0==l&&(s=0);for(var a;a=n.shift();)"[object Array]"===Object.prototype.toString.call(a)?a[1].apply(a[0],a[2]):a();for(var c=0;c<o.length;c++){var h=o[c];h()}for(var _ in u)if(u.hasOwnProperty(_)){var d=u[_];d.start||(d.start=e);var p=e-d.start,v=p/d.duration;v>=1&&(v=1,delete u[_]),d.cb(d.easeFn(v)),1==v&&d.over&&d.over()}for(var _ in i)if(i.hasOwnProperty(_)){var d=i[_];d[0](d[1]),delete i[_]}for(var _ in r)if(r.hasOwnProperty(_)){var d=r[_];d.nextTime<e&&(d.remove?d.nextTime>0?(d.fn(),delete r[_]):d.nextTime=e+d.step:(d.fn(),d.nextTime=e+d.step)),d.until&&d.until<e&&delete r[_]}t(f),l=e};f(),e=!0}}),t.once=function(t,e,n){i[t]=[e,n]},t.onFrame=function(t){o.push(t)},t.polyfill=function(){},t.removeFrameFn=function(t){var e=o.indexOf(t);return e>=0?(t._onRemove&&t._onRemove(),o.splice(e,1),!0):!1}}(this)},o=function(t,e,n,i,r,s,a,u){var c,l=this;if(!(l instanceof o))return new o(t,e,n,i,r,s,a,u);var f=[t,e,n,i,r,s,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=o._classInfo.name)return new c(t,e,n,i,r,s,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};o._classInfo={name:"later"},o.prototype=new i,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.later=o,this.later=o):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.later=o:this.later=o}.call(new Function("return this")());var s=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){var e;t.hasOwnProperty("__factoryClass")||(t.__factoryClass=[]),t.__factoryClass.push(function(t,n){return t===!1&&n?void 0:(e||(e={}),e[t]?e[t]:void(e[t]=this))}),t.addCommands=function(t,e){if(this.isArray(t)){var n=this;return t.forEach(function(t){n.addCommands(t)}),this}this._commands.push({fnCmd:t,fnFail:e,async:!0})},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){this._commands||(this._commands=[],this.waitingList=[],this._index=0);var n=this;e||o().every(1/30,function(){n.step()})}),t.step=function(){var t=this._index,e=this._commands.length;if(t!=e){for(var i=n(),r=i,o=n(),s=this;e>t;){var a=this._commands[t];!function(t){r=r.then(function(){var e=n();return t.fnCmd(function(){e.resolve(!0)},function(n){e.resolve(!0),t.fnFail&&t.fnFail(n)}),e}).fail(function(e){t.fnFail&&t.fnFail(e)})}(a),this._index++,t++}return r.then(function(){if(s.waitingList.shift(),o.resolve(!0),s.waitingList.length){var t=s.waitingList[0];t.resolve(!0)}}).fail(function(){}),this.waitingList.push(i),1==this.waitingList.length&&i.resolve(!0),o}}}(this)},a=function(t,e,n,i,r,o,s,u){var c,l=this;if(!(l instanceof a))return new a(t,e,n,i,r,o,s,u);var f=[t,e,n,i,r,o,s,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=a._classInfo.name)return new c(t,e,n,i,r,o,s,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};a._classInfo={name:"sequenceStepper"},a.prototype=new s;var u=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){t.cont=function(t){if(this.isArray(t)){var e=this,i=this._list.slice(this._index+1);if(0==i.length)return void this.step();var o=[];t.forEach(function(t){var n=e._list.slice(e._index+1),i=r(e);e._subStreams.push(i),i.addObserver(n),o.push(i.pushValue(t))});var s=n();s.all(o).then(function(){var t=[];e._subStreams.length=0,o.forEach(function(e){t.push(e.value())}),e.resolve(t)}),s.resolve(!0)}else"undefined"!=typeof t&&(this._context.value=t),this.step()},t.ctxVar=function(t,e){if("undefined"==typeof e){var n=this._contextVars[t];return"undefined"==typeof n&&this._parent?this._parent.ctxVar(t):n}this._contextVars[t]=e},t.get=function(t){if(this._closure){var e=this._contextVars[t];return"undefined"==typeof e?this._parent.get(t):e}var e=this._contextVars[t];return"undefined"==typeof e&&this._parent?this._parent.get(t):e},t.getRest=function(){},t.getState=function(){return this._stopState},t.getValue=function(){return!this._context&&this._parent?this._parent.getValue():this._context&&!this._context.value&&!this._context.initWith&&this._parent?this._parent.getValue():this._context.value||this._context.initWith},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){this._context={},this._contextVars={},this._subStreams=[],this._stopState=0,t&&(this._parent=t),e&&(this._closure=!0)}),t.killAll=function(){this._subStreams&&this._subStreams.forEach(function(t){t.killAll()})},t.run=function(t){if(this._closure){if(this._parent)return void this._parent.run(t);console.error("No parent for closure")}this._stopState=1,this.cont(t)},t.set=function(t,e){if("undefined"!=typeof e){if(this._closure)if("undefined"!=typeof this._contextVars[t])this._contextVars[t]=e;else if(this._parent)return this._parent.set(t,e),this;return"undefined"==typeof this._contextVars[t]&&this._parent?(this._parent.set(t,e),this):(this._contextVars[t]=e,this)}},t.setContext=function(t){this._context=t},t.setParent=function(t){this._parent=t},t.start=function(t){this._list=t,this._index=-1,this.step()},t.step=function(){this._index++;var t=this._index;if(this._list[t]){var e=this._list[t];this.isObject(e)&&!this.isFunction(e)?e.closure?(e.closure.setParent(this),e.fn.apply(e.closure,[e.closure])):e.fn.apply(this,[this]):e.apply(this,[this])}else"undefined"==typeof this._context.value&&(this._context.value=this._context.initWith),this._stopState<2&&(this._stopState=7),this.resolve(this._context.value)},t.stopStream=function(){this._context.value||(this._context.value=this._context.initWith),this._stopState=3,this.resolve(this._context.value)}}(this)},c=function(t,e,n,i,r,o,s,a){var u,l=this;if(!(l instanceof c))return new c(t,e,n,i,r,o,s,a);var f=[t,e,n,i,r,o,s,a];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){u=t.apply(l,f)
}),"function"==typeof u){if(u._classInfo.name!=c._classInfo.name)return new u(t,e,n,i,r,o,s,a)}else if(u)return u;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};u.prototype=n.prototype,c._classInfo={name:"streamProcessor"},c.prototype=new u,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.streamProcessor=c,this.streamProcessor=c):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.streamProcessor=c:this.streamProcessor=c}.call(new Function("return this")()),function(t){var e;t.addObserver=function(t,e){if(this.isArray(t)){var n=this;return void t.forEach(function(t){n.addObserver(t,e)})}return this.isObject(t)&&!this.isFunction(t)?void this._observers.push(t):(this._observers.push({fn:t,closure:e}),this)},t.branch=function(t,e){var n=this,i=(new Date).getTime();return n._lastBranch=i,this.addObserver(function(r){var o=((new Date).getTime(),r.getValue());setTimeout(function(){var s=(new Date).getTime();if(!(e>s-i)){var a=0;(a=n.isActiveRunning())||(r=n.getLastProcess(),3==r.getState()&&(n._lastBranch=s,i=s,t(o)))}},e),r.run()}),this},t.branchIfOk=function(t,e){var n=this,i=(new Date).getTime();return n._lastBranch=i,this.addObserver(function(r){var o=((new Date).getTime(),r.getValue());setTimeout(function(){var s=(new Date).getTime();if(!(e>s-i)){var a=0;(a=n.isActiveRunning())||(r=n.getLastProcess(),7==r.getState()&&(n._lastBranch=s,i=s,t(o)))}},e),r.run()}),this},t.collectValuesFor=function(t){var e=this,n=(new Date).getTime();return e._lastBranch=n,this.addObserver(function(i){(new Date).getTime(),i.getValue();setTimeout(function(){var r=(new Date).getTime();if(!(t>r-n)){var o=e.isActiveRunning(),s=e.getLastProcess();return o>1&&i!=s?void i.stopStream(i.getValue()):void s.run()}},t)}),this},t.combineLatest=function(t){var e=this,n=[],i=t.length,r=function(){for(var t=!0,e=0;i>e;e++)"undefined"==typeof n[e]&&(t=!1);return t};return t.forEach(function(t,i){t.addObserver(function(t){n[i]=t.getValue(),r()&&e.pushValue(n),t.run()})}),this},t.filter=function(t){var e=this;return this.addObserver(function(n){var i=n.getValue(),r=[];return e.isArray(i)?(i.forEach(function(e){t(e)&&r.push(e)}),void(r.length?n.run(r):n.stopStream())):t(i)?void n.run(i):void n.stopStream()}),this},t.forContext=function(t){var e=this;e.addObserver(function(n){var i=n.getValue(),r=[];e.isArray(i)?i.forEach(function(e,i){r.push(t(e,i,n))}):r.push(t(i,0,n)),n.run(i)})},t.forEach=function(t){var e=this;return e.addObserver(function(n){var i=n.getValue(),r=[];e.isArray(i)?i.forEach(function(e){r.push(t(e))}):r.push(t(i)),n.run(i)}),this},t.getLastProcess=function(){var t=this._active.length;return t>0?this._active[t-1]:this._lastProcess},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._childIndex=0,this._childStreams=[],this._values=[],this._active=[],this._lastProcess,this._observers=[],this._id=this.guid(),e||(e={}),e[this._id]=this,t&&(this._parentProcessor=t)}),t.isActiveRunning=function(){return this._active.length},t.killAll=function(){this._active.forEach(function(t){t.killAll(),t.stopStream()})},t.map=function(t){var e=this;return e.addObserver(function(n){var i=n.getValue(),r=[];e.isArray(i)?i.forEach(function(e){r.push(t(e))}):r.push(t(i)),n.run(r)}),this},t.pushValue=function(t){var e=n();return this.startProcess({initWith:t},e),e},t.reduce=function(t,e){var n=this;return n.addObserver(function(i){var r=i.getValue(),o=[];o=n.isArray(r)?r.reduce(t,e):[r].reduce(t,e),i.run(o)}),this},t.startProcess=function(t,e){var n=this._observers.slice(),i=c(this._parentProcessor);i.setContext(t),i.start(n),i._streamPromise=e,this._active.push(i);var r=this;i.then(function(t){var n=r._active.indexOf(i);r._active.splice(n,1),e.resolve(t),r._lastProcess=i})},t.step=function(){}}(this)},r=function(t,e,n,i,o,s,a,u){var c,l=this;if(!(l instanceof r))return new r(t,e,n,i,o,s,a,u);var f=[t,e,n,i,o,s,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=r._classInfo.name)return new c(t,e,n,i,o,s,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};r._classInfo={name:"simpleStream"},r.prototype=new i;var o=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e,i){css().bind(".mainWindow",{width:"600px",height:"auto",overflow:"hidden",border:"none","box-shadow":"-1px -1px 18px 0px rgba(50, 50, 50, 0.9);"}),css().bind(".mainTools",{width:"600px",height:"20px",overflow:"hidden",cursor:"pointer",border:"1px solid gray;","background-color":"#333"});var o,s,a=100,u=100,c=t.div();c.addClass("mainWindow"),c.absolute(),c.x(a).y(u),c.addClass("animClassName");var l=c.div("mainTools");l.draggable(function(){o=a,s=u},function(t,e){c.x(e.dx+o),c.y(e.dy+s),a=e.dx+o,u=e.dy+s},function(){});var f=c.div();this._mainWindow=f,e.then(function(){css().bind(".aceHTML",{width:"1200px",height:"350px"});var o=n(e);o.initializeShell(e,i),o.mainWindow(t),l.button().text("dir").on("click",function(){o.exec("dir")}),l.button().text("cls").on("click",function(){o.clearScreen()}),l.button().text("close").on("click",function(){c.addClass("animZoomOut")}),o.addPipedCmd("grep",function(t,e,n){return e?(e=e.trim(),t&&t.match(e)?n(t):void n(null)):void n()}),f.div().add(o.getOutputArea()),f.add(o.getInputField());var s=o.getInputField(),a=r(),u=f.div();a.branch(function(){u.clear()},600),a.filter(function(t){return t&&t.length>0?o.isValidCommand(t):void 0}),a.collectValuesFor(100),a.forEach(function(t){u.text(t+" command entered")}),s.on("value",function(){a.pushValue(s.val())}),setTimeout(function(){o.exec("ls")},100)})})}(this)},s=function(t,e,n,i,r,o,a,u){var c,l=this;if(!(l instanceof s))return new s(t,e,n,i,r,o,a,u);var f=[t,e,n,i,r,o,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=s._classInfo.name)return new c(t,e,n,i,r,o,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};s._classInfo={name:"shellWindow"},s.prototype=new o,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.shellWindow=s,this.shellWindow=s):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.shellWindow=s:this.shellWindow=s}.call(new Function("return this")()),function(t){t.createWindow=function(t,e){var n=(s(t,e),{"background-color":"#777",color:"white"}),i={"background-color":"#000",opacity:.98};css().bind(".cmdInfo",{color:"cyan"}),css().bind("pre",{margin:"1px"}),css().bind(".shellCmdOutput",n,i,{height:"400px",overflow:"auto"}),css().bind(".shellCmdInput",n,i,{width:"100%",height:"50px"}),css().bind(".cmdline",{color:"#0f0"}),css().bind(".dir",{color:"#05f",cursor:"pointer"}),css().bind(".link",{color:"#9af",cursor:"pointer","text-decoration":"underline"}),css().bind(".warning",{color:"yellow"}),css().bind(".error",{color:"red"})},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){css().animation("animClassName1",{duration:"2s","iteration-count":1,"timing-function":"ease-in"},{rotate:-100},.5,{rotate:100},{rotate:0}),css().animation("animZoomOut",{duration:"2s","iteration-count":1,"timing-function":"ease-in"},{transform:"scale(1,1)"},{transform:"translate(50px,100px) scale(0,0)"})})}(this)},n=function(t,e,i,r,o,s,a,u){var c,l=this;if(!(l instanceof n))return new n(t,e,i,r,o,s,a,u);var f=[t,e,i,r,o,s,a,u];if(l.__factoryClass)if(l.__factoryClass.forEach(function(t){c=t.apply(l,f)}),"function"==typeof c){if(c._classInfo.name!=n._classInfo.name)return new c(t,e,i,r,o,s,a,u)}else if(c)return c;l.__traitInit?l.__traitInit.forEach(function(t){t.apply(l,f)}):"function"==typeof l.init&&l.init.apply(l,f)};n._classInfo={name:"shellModule"},n.prototype=new e,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.shellModule=n,this.shellModule=n):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.shellModule=n:this.shellModule=n}.call(new Function("return this")()),"undefined"!=typeof define&&null!==define&&null!=define.amd&&define(t)}).call(new Function("return this")());